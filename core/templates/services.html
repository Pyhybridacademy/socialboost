{% extends 'base.html' %}

{% block title %}Our Services - SocialBoost{% endblock %}

{% block content %}
<!-- Services Header -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="fw-bold mb-3">Our Services</h1>
                <p class="lead">Browse our comprehensive range of social media engagement services</p>
            </div>
        </div>
    </div>
</section>

<!-- Services Filter -->
<section class="py-4">
    <div class="container">
        <div class="row mb-4">
            <div class="col-md-6">
                <form method="get" action="{% url 'services' %}" class="d-flex">
                    <input type="text" name="search" class="form-control me-2" placeholder="Search services..." value="{{ request.GET.search|default:'' }}">
                    <button type="submit" class="btn btn-primary">Search</button>
                </form>
            </div>
            <div class="col-md-6">
                <div class="d-flex justify-content-md-end mt-3 mt-md-0">
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="categoryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            {% if selected_category %}{{ selected_category }}{% else %}All Categories{% endif %}
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="categoryDropdown">
                            <li><a class="dropdown-item" href="{% url 'services' %}">All Categories</a></li>
                            {% for category in categories %}
                                <li><a class="dropdown-item" href="{% url 'services' %}?category={{ category }}">{{ category }}</a></li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Services List -->
        <div class="row g-4">
            {% for service in services %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 service-card">
                        <div class="card-body">
                            <span class="badge bg-primary mb-2">{{ service.category }}</span>
                            <h5 class="card-title">{{ service.name }}</h5>
                            <p class="card-text">{{ service.description|default:"No description available"|truncatewords:20 }}</p>
                            <ul class="list-unstyled mb-3">
                                <li><i class="fas fa-check-circle text-success me-2"></i> Min: {{ service.min_quantity }}</li>
                                <li><i class="fas fa-check-circle text-success me-2"></i> Max: {{ service.max_quantity }}</li>
                                <li><i class="fas fa-tag text-primary me-2"></i> â‚¦{{ service.rate|floatformat:2 }} per 1000</li>
                            </ul>
                            <form method="post" action="{% url 'create_order' %}">
                                {% csrf_token %}
                                <input type="hidden" name="service" value="{{ service.id }}">  <!-- Hidden service ID -->
                                {{ form.as_p }}  <!-- Render the form fields as paragraphs -->
                                <button type="submit" class="btn btn-primary">Place Order</button>
                            </form>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12 text-center py-5">
                    <i class="fas fa-search fa-3x text-muted mb-3"></i>
                    <h4>No services found</h4>
                    <p>Try adjusting your search or filter criteria</p>
                    <a href="{% url 'services' %}" class="btn btn-outline-primary">View All Services</a>
                </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if services.has_other_pages %}
            <nav class="mt-5" aria-label="Services pagination">
                <ul class="pagination justify-content-center">
                    {% if services.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ services.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.category %}&category={{ request.GET.category }}{% endif %}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link" aria-hidden="true">&laquo;</span>
                        </li>
                    {% endif %}
                    
                    {% for i in services.paginator.page_range %}
                        {% if services.number == i %}
                            <li class="page-item active"><span class="page-link">{{ i }}</span></li>
                        {% else %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ i }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.category %}&category={{ request.GET.category }}{% endif %}">{{ i }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    
                    {% if services.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ services.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}{% if request.GET.category %}&category={{ request.GET.category }}{% endif %}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link" aria-hidden="true">&raquo;</span>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    </div>
</section>

<!-- FAQ Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <h2 class="text-center mb-4">Frequently Asked Questions</h2>
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                How fast will I see results?
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Most of our services start within 30 minutes to a few hours after placing an order. The delivery speed depends on the service type and quantity ordered. You can check the estimated delivery time on each service page.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                Are your services safe?
                            </button>
                        </h2>
                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                Yes, all our services are safe and comply with social media platforms' terms of service. We use organic methods to increase your engagement, and we never ask for your password or sensitive information.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingThree">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                What information do I need to provide?
                            </button>
                        </h2>
                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                For most services, you only need to provide your public profile URL or username. Some services might require specific post URLs or other public information. We never ask for your login credentials.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingFour">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                What payment methods do you accept?
                            </button>
                        </h2>
                        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                We accept various payment methods including credit/debit cards, PayPal, and cryptocurrency. All payments are processed securely through our payment gateway.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h2 class="fw-bold mb-3">Ready to Boost Your Social Media?</h2>
                <p class="lead mb-4">Choose from our wide range of services and take your social media presence to the next level.</p>
                <a href="{% url 'register' %}" class="btn btn-primary btn-lg">Get Started Now</a>
            </div>
        </div>
    </div>
</section>
{% endblock %}